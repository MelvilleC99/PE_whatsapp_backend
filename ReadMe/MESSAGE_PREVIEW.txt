â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                 YOUR WHATSAPP MESSAGE PREVIEW                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

When you run the system, Melville will receive this WhatsApp message:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                       â”‚
â”‚  ğŸ“Š *Weekly Property Insights for Melville du Plessis*              â”‚
â”‚                                                                       â”‚
â”‚  ğŸ“ˆ Leads: 230                                                       â”‚
â”‚  ğŸŒ Most Active Portal: P24 - 60% of leads                          â”‚
â”‚  ğŸ’¼ New Offers: 3                                                    â”‚
â”‚  ğŸ  Sales: 2                                                         â”‚
â”‚  ğŸ’° Revenue: R8mil                                                   â”‚
â”‚  ğŸ¯ Commission: R150k                                                â”‚
â”‚                                                                       â”‚
â”‚  _Generated on 13 November 2025_                                     â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š FIREBASE STRUCTURE:

Collection: whatsapp_users
â””â”€ Document: (auto-generated ID)
    â”œâ”€ name: "Melville du Plessis"
    â”œâ”€ phone: "27727377590"
    â”œâ”€ frequency: "weekly"
    â”œâ”€ active: true
    â”œâ”€ created_at: timestamp
    â””â”€ last_sent: null

Collection: insights
â””â”€ Document: (same ID as user)
    â”œâ”€ user_id: "(user doc id)"
    â”œâ”€ generated_at: timestamp
    â””â”€ data:
        â”œâ”€ leads: 230
        â”œâ”€ most_active_portal: "P24 - 60% of leads"
        â”œâ”€ new_offers: 3
        â”œâ”€ sales: 2
        â”œâ”€ revenue: "R8mil"
        â””â”€ commission: "R150k"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ TO SEND THIS MESSAGE:

Step 1: Setup user and insights
  python setup_melville.py

Step 2: Send WhatsApp message
  python -m src.scheduler --once

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ CUSTOMIZING INSIGHTS:

To change the metrics shown:
  1. Edit: src/insight_generator.py
  2. Add your database queries
  3. Return dict with your metrics

Example:
  insights = {
      "leads": query_leads(),
      "most_active_portal": query_portal(),
      "new_offers": query_offers(),
      "sales": query_sales(),
      "revenue": query_revenue(),
      "commission": query_commission()
  }

The message formatter will automatically include them!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
